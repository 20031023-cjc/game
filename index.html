<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ã»ã—ã‚’ã‚ã¤ã‚ã¦ï¼</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap');

  body, html {
    margin: 0; padding: 0; height: 100%;
    background: radial-gradient(circle at bottom, #0a0038, #1b0048, #40007f);
    font-family: 'Kosugi Maru', sans-serif;
    overflow: hidden;
    user-select: none;
  }

  .game-header {
    position: fixed;
    top: 15px; left: 50%;
    transform: translateX(-50%);
    color: #fff;
    text-align: center;
    z-index: 1000;
    text-shadow: 0 0 8px #ffd700, 0 0 15px #ffea00;
  }
  .game-header h1 {
    font-size: 3rem;
    margin: 0;
    animation: glow 2s ease-in-out infinite alternate;
  }
  .game-header p {
    margin: 5px 0 0;
    font-size: 1.5rem;
  }

  @keyframes glow {
    from { text-shadow: 0 0 6px #ffd700, 0 0 12px #ffea00; }
    to { text-shadow: 0 0 18px #ffd700, 0 0 28px #ffea00; }
  }

  #starfield {
    position: fixed;
    width: 100vw;
    height: 100vh;
    overflow: visible;
    top: 0; left: 0;
    pointer-events: none; /* è®©åŠ¨ç”»æ˜Ÿæ˜Ÿä¸é˜»æŒ¡ç‚¹å‡» */
  }

  /* æ˜Ÿæ˜Ÿå®¹å™¨ - ç”¨æ¥æ§åˆ¶ç‚¹å‡»åŒºåŸŸ */
  .star {
    position: absolute;
    cursor: pointer;
    pointer-events: auto; /* å…è®¸ç‚¹å‡» */
    user-select: none;
    transform-origin: center;
    will-change: transform;
  }

  /* æ˜Ÿæ˜ŸåŠ¨ç”» */
  .star svg {
    display: block;
    width: 40px;
    height: 40px;
    filter: drop-shadow(0 0 5px #fff);
    animation: twinkle 3s ease-in-out infinite;
  }
  .star:nth-child(odd) svg {
    animation-duration: 4s;
  }
  @keyframes twinkle {
    0%, 100% { opacity: 1; transform: scale(1) rotate(0deg); filter: drop-shadow(0 0 10px #fff); }
    50% { opacity: 0.6; transform: scale(1.1) rotate(15deg); filter: drop-shadow(0 0 20px #ffdd00); }
  }

</style>
</head>
<body>

<div class="game-header">
  <h1>ğŸŒŸ ã»ã—ã‚’ã‚ã¤ã‚ã¦ï¼ ğŸŒŸ</h1>
  <p>ã‚¹ã‚³ã‚¢: <span id="score">0</span></p>
</div>

<div id="starfield"></div>

<script>
  const starfield = document.getElementById('starfield');
  const scoreEl = document.getElementById('score');
  let score = 0;
  let starsCount = 25;
  let stars = [];

  // SVG æ˜Ÿæ˜Ÿè·¯å¾„ï¼ˆäº”è§’æ˜Ÿï¼‰
  const starSVG = `<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
  <defs>
    <radialGradient id="grad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#fff" />
      <stop offset="70%" stop-color="#ffea00" />
      <stop offset="100%" stop-color="#ff8c00" />
    </radialGradient>
  </defs>
  <polygon points="32 5 39.09 24.26 59 24.26 42.36 38.74 48.45 58 32 43.52 15.55 58 21.64 38.74 5 24.26 24.91 24.26" fill="url(#grad)" stroke="#fff" stroke-width="1"/>
  </svg>`;

  function random(min, max) {
    return Math.random() * (max - min) + min;
  }

  function createStar() {
    const star = document.createElement('div');
    star.classList.add('star');
    star.innerHTML = starSVG;

    // è®¾ç½®åˆå§‹ä½ç½®å’Œå¤§å°
    star.style.left = random(0, window.innerWidth - 40) + 'px';
    star.style.top = '-50px'; // ä»å±å¹•ä¸Šæ–¹å¼€å§‹æ‰è½
    star.style.width = random(30, 50) + 'px';
    star.style.height = star.style.width;

    // è‡ªå®šä¹‰å±æ€§
    star.speed = random(1, 3) + score * 0.1; // ä¸‹è½é€Ÿåº¦ï¼Œåˆ†æ•°è¶Šé«˜è¶Šå¿«
    star.clicked = false;

    // åŠ¨ç”»æ•ˆæœ - è½»å¾®å·¦å³æ‘†åŠ¨
    star.animate([
      { transform: 'translateX(0)' },
      { transform: `translateX(${random(-20, 20)}px)` },
      { transform: 'translateX(0)' }
    ], {
      duration: random(3000, 6000),
      iterations: Infinity,
      easing: 'ease-in-out'
    });

    starfield.appendChild(star);
    stars.push(star);
  }

  function resetStar(star) {
    star.style.left = random(0, window.innerWidth - 40) + 'px';
    star.style.top = '-50px';
    star.speed = random(1, 3) + score * 0.1;
    star.clicked = false;
  }

  function updateStars() {
    stars.forEach(star => {
      if (star.clicked) return;
      let currentTop = parseFloat(star.style.top);
      currentTop += star.speed;
      if (currentTop > window.innerHeight) {
        resetStar(star);
      } else {
        star.style.top = currentTop + 'px';
      }
    });
    requestAnimationFrame(updateStars);
  }

  function onClick(e) {
    const rect = starfield.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    // é€†åºæ£€æµ‹ï¼Œé¿å…ç‚¹å‡»é‡å æ˜Ÿæ˜Ÿæ—¶ç‚¹ä¸åˆ°ä¸Šå±‚
    for (let i = stars.length - 1; i >= 0; i--) {
      const star = stars[i];
      if (star.clicked) continue;

      // ç‚¹å‡»èŒƒå›´æ‰©å¤§1.8å€ï¼Œå®é™…æ˜Ÿæ˜Ÿ40pxï¼Œç‚¹å‡»åŒºåŸŸå¤§çº¦72px
      const starX = star.offsetLeft + 20; // ä¸­å¿ƒç‚¹x
      const starY = star.offsetTop + 20;  // ä¸­å¿ƒç‚¹y
      const dx = x - starX;
      const dy = y - starY;
      const dist = Math.sqrt(dx*dx + dy*dy);
      if (dist < 36) { // 36pxåŠå¾„ï¼Œç‚¹å¤§äº†ç‚¹
        star.clicked = true;
        score++;
        scoreEl.textContent = score;
        resetStar(star);

        // æ¯10åˆ†åŠ 5é¢—æ˜Ÿï¼Œæœ€å¤š150é¢—
        if (score % 10 === 0 && stars.length < 150) {
          for(let j=0;j<5;j++) createStar();
        }
        break;
      }
    }
  }

  // åˆå§‹åŒ–æ˜Ÿæ˜Ÿ
  for(let i=0; i<starsCount; i++) {
    createStar();
  }

  updateStars();

  starfield.addEventListener('click', onClick);

  window.addEventListener('resize', () => {
    // çª—å£å˜åŠ¨æ—¶é˜²æ­¢æ˜Ÿæ˜Ÿè¶…å‡ºè§†å£ï¼Œé‡ç½®æ‰€æœ‰æ˜Ÿæ˜Ÿä½ç½®
    stars.forEach(resetStar);
  });
</script>

</body>
</html>
